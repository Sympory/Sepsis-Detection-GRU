<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRU Sepsis Erken Tespit Sistemi</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1>üè• Sepsis Erken Tespit Sistemi</h1>
                <p>GRU Deep Learning ile Ger√ßek Zamanlƒ± Hasta ƒ∞zleme - 34 Klinik Parametre</p>
            </div>
        </div>
    </header>

    <!-- Ana Container -->
    <div class="container main-container">

        <!-- Hasta Listesi G√∂r√ºn√ºm√º -->
        <div id="patient-list-view" class="view active">
            <div class="view-header">
                <h2>üë• Hasta Listesi</h2>
                <button class="btn btn-primary" onclick="showAddPatientModal()">
                    ‚ûï Yeni Hasta Ekle
                </button>
            </div>

            <div id="patients-container" class="patients-grid">
                <!-- Hastalar buraya y√ºklenecek -->
                <div class="loading">Hastalar y√ºkleniyor...</div>
            </div>
        </div>

        <!-- Hasta Detay G√∂r√ºn√ºm√º -->
        <div id="patient-detail-view" class="view">
            <div class="view-header">
                <button class="btn btn-secondary" onclick="showPatientList()">
                    ‚¨ÖÔ∏è Hasta Listesine D√∂n
                </button>
                <div class="patient-info">
                    <h2 id="patient-name">--</h2>
                    <p id="patient-meta">--</p>
                </div>
                <button class="btn btn-danger" onclick="deleteCurrentPatient()">
                    üóëÔ∏è Hastayƒ± Sil
                </button>
            </div>

            <!-- Risk Trend Grafiƒüi -->
            <div class="card">
                <h3>üìä Risk Skoru Trendi</h3>
                <canvas id="risk-chart"></canvas>
            </div>

            <!-- Saatlik Veri Ekleme Formu -->
            <div class="card">
                <h3>‚è±Ô∏è Saatlik Veri Giri≈üi (34 Klinik Parametre)</h3>
                <form id="hourly-data-form" onsubmit="addHourlyData(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Saat *</label>
                            <input type="number" id="hour-input" min="1" required>
                            <small>ICU kalƒ±≈ü saati (1'den ba≈ülar)</small>
                        </div>
                    </div>

                    <!-- Vital Signs -->
                    <h4>üíì Vital Signs (Hayati Bulgular)</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>HR</label>
                            <input type="number" id="HR" step="0.1" placeholder="80-100">
                            <small>Kalp atƒ±≈ü hƒ±zƒ± (bpm)</small>
                        </div>
                        <div class="form-group">
                            <label>O2Sat</label>
                            <input type="number" id="O2Sat" step="0.1" placeholder="95-100">
                            <small>Oksijen saturasyonu (%)</small>
                        </div>
                        <div class="form-group">
                            <label>Temp</label>
                            <input type="number" id="Temp" step="0.1" placeholder="36-37">
                            <small>V√ºcut sƒ±caklƒ±ƒüƒ± (¬∞C)</small>
                        </div>
                        <div class="form-group">
                            <label>Resp</label>
                            <input type="number" id="Resp" step="0.1" placeholder="12-20">
                            <small>Solunum hƒ±zƒ± (/dk)</small>
                        </div>
                    </div>

                    <!-- Blood Pressure -->
                    <h4>ü©∏ Kan Basƒ±ncƒ±</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>SBP</label>
                            <input type="number" id="SBP" step="0.1" placeholder="120">
                            <small>Sistolik KB (mmHg)</small>
                        </div>
                        <div class="form-group">
                            <label>DBP</label>
                            <input type="number" id="DBP" step="0.1" placeholder="80">
                            <small>Diyastolik KB (mmHg)</small>
                        </div>
                        <div class="form-group">
                            <label>MAP</label>
                            <input type="number" id="MAP" step="0.1" placeholder="70-100">
                            <small>Ortalama arteriyel basƒ±n√ß (mmHg)</small>
                        </div>
                    </div>

                    <!-- Respiratory -->
                    <h4>ü´Å Solunum Parametreleri</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>EtCO2</label>
                            <input type="number" id="EtCO2" step="0.1" placeholder="35-45">
                            <small>End-tidal CO2 (mmHg)</small>
                        </div>
                        <div class="form-group">
                            <label>FiO2</label>
                            <input type="number" id="FiO2" step="0.1" placeholder="21-100">
                            <small>Oksijen fraksiyonu (%)</small>
                        </div>
                        <div class="form-group">
                            <label>PaCO2</label>
                            <input type="number" id="PaCO2" step="0.1" placeholder="35-45">
                            <small>Arteriyel CO2 (mmHg)</small>
                        </div>
                        <div class="form-group">
                            <label>SaO2</label>
                            <input type="number" id="SaO2" step="0.1" placeholder="95-100">
                            <small>Arteriyel O2 saturasyonu (%)</small>
                        </div>
                    </div>

                    <!-- Acid-Base Balance -->
                    <h4>‚öñÔ∏è Asit-Baz Dengesi</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>pH</label>
                            <input type="number" id="pH" step="0.01" placeholder="7.35-7.45">
                            <small>Arteriyel pH</small>
                        </div>
                        <div class="form-group">
                            <label>BaseExcess</label>
                            <input type="number" id="BaseExcess" step="0.1" placeholder="-2 to +2">
                            <small>Baz fazlalƒ±ƒüƒ± (mmol/L)</small>
                        </div>
                        <div class="form-group">
                            <label>HCO3</label>
                            <input type="number" id="HCO3" step="0.1" placeholder="22-26">
                            <small>Bikarbonat (mmol/L)</small>
                        </div>
                    </div>

                    <!-- Laboratory - Liver & Kidney -->
                    <h4>üß™ Karaciƒüer & B√∂brek Fonksiyonlarƒ±</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>BUN</label>
                            <input type="number" id="BUN" step="0.1" placeholder="7-20">
                            <small>Kan √ºre azotu (mg/dL)</small>
                        </div>
                        <div class="form-group">
                            <label>Creatinine</label>
                            <input type="number" id="Creatinine" step="0.1" placeholder="0.6-1.2">
                            <small>Kreatinin (mg/dL)</small>
                        </div>
                        <div class="form-group">
                            <label>AST</label>
                            <input type="number" id="AST" step="0.1" placeholder="10-40">
                            <small>Aspartat aminotransferaz (U/L)</small>
                        </div>
                        <div class="form-group">
                            <label>Alkalinephos</label>
                            <input type="number" id="Alkalinephos" step="0.1" placeholder="40-130">
                            <small>Alkalen fosfataz (U/L)</small>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Bilirubin_total</label>
                            <input type="number" id="Bilirubin_total" step="0.1" placeholder="0.1-1.2">
                            <small>Total bilirubin (mg/dL)</small>
                        </div>
                        <div class="form-group">
                            <label>Bilirubin_direct</label>
                            <input type="number" id="Bilirubin_direct" step="0.1" placeholder="0-0.3">
                            <small>Direkt bilirubin (mg/dL)</small>
                        </div>
                    </div>

                    <!-- Electrolytes & Metabolites -->
                    <h4>‚ö° Elektrolitler & Metabolitler</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Calcium</label>
                            <input type="number" id="Calcium" step="0.1" placeholder="8.5-10.5">
                            <small>Kalsiyum (mg/dL)</small>
                        </div>
                        <div class="form-group">
                            <label>Chloride</label>
                            <input type="number" id="Chloride" step="0.1" placeholder="96-106">
                            <small>Klor√ºr (mmol/L)</small>
                        </div>
                        <div class="form-group">
                            <label>Potassium</label>
                            <input type="number" id="Potassium" step="0.1" placeholder="3.5-5">
                            <small>Potasyum (mmol/L)</small>
                        </div>
                        <div class="form-group">
                            <label>Magnesium</label>
                            <input type="number" id="Magnesium" step="0.1" placeholder="1.5-2.5">
                            <small>Magnezyum (mg/dL)</small>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Phosphate</label>
                            <input type="number" id="Phosphate" step="0.1" placeholder="2.5-4.5">
                            <small>Fosfat (mg/dL)</small>
                        </div>
                        <div class="form-group">
                            <label>Glucose</label>
                            <input type="number" id="Glucose" step="0.1" placeholder="70-110">
                            <small>Kan ≈üekeri (mg/dL)</small>
                        </div>
                        <div class="form-group">
                            <label>Lactate</label>
                            <input type="number" id="Lactate" step="0.1" placeholder="0.5-2">
                            <small>Laktat (mmol/L)</small>
                        </div>
                    </div>

                    <!-- Hematology -->
                    <h4>ü©∏ Hematoloji</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>WBC</label>
                            <input type="number" id="WBC" step="0.1" placeholder="4-11">
                            <small>Beyaz k√ºre (K/¬µL)</small>
                        </div>
                        <div class="form-group">
                            <label>Hct</label>
                            <input type="number" id="Hct" step="0.1" placeholder="37-52">
                            <small>Hematokrit (%)</small>
                        </div>
                        <div class="form-group">
                            <label>Hgb</label>
                            <input type="number" id="Hgb" step="0.1" placeholder="12-17">
                            <small>Hemoglobin (g/dL)</small>
                        </div>
                        <div class="form-group">
                            <label>Platelets</label>
                            <input type="number" id="Platelets" step="1" placeholder="150-400">
                            <small>Trombosit (K/¬µL)</small>
                        </div>
                    </div>

                    <!-- Coagulation & Cardiac Markers -->
                    <h4>ü´Ä Pƒ±htƒ±la≈üma & Kardiyak Markerlar</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>PTT</label>
                            <input type="number" id="PTT" step="0.1" placeholder="25-35">
                            <small>Parsiyel tromboplastin zamanƒ± (sn)</small>
                        </div>
                        <div class="form-group">
                            <label>Fibrinogen</label>
                            <input type="number" id="Fibrinogen" step="1" placeholder="200-400">
                            <small>Fibrinojen (mg/dL)</small>
                        </div>
                        <div class="form-group">
                            <label>TroponinI</label>
                            <input type="number" id="TroponinI" step="0.01" placeholder="<0.04">
                            <small>Troponin I (ng/mL)</small>
                        </div>
                    </div>

                    <!-- NEW: Sepsis-Specific Biomarkers -->
<h4 class="section-toggle" onclick="toggleSection('sepsis-markers')">
    üî¨ Sepsis Biomarker'larƒ± (Yeni) <span class="toggle-icon">‚ñº</span>
</h4>
<div id="sepsis-markers" class="collapsible-section">
    <div class="form-row">
        <div class="form-group">
            <label>Procalcitonin (PCT)</label>
            <input type="number" id="PCT" step="0.01" placeholder="< 0.5">
            <small>ng/mL | Normal: <0.5 | Sepsis:>2.0</small>
        </div>
        <div class="form-group">
            <label>C-Reactive Protein (CRP)</label>
            <input type="number" id="CRP" step="0.1" placeholder="< 10">
            <small>mg/L | Normal: <10 | Sepsis:>50</small>
        </div>
        <div class="form-group">
            <label>Presepsin</label>
            <input type="number" id="Presepsin" step="1" placeholder="< 600">
            <small>pg/mL | Normal: <600 | Sepsis:>800</small>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group">
            <label>Interleukin-6 (IL-6)</label>
            <input type="number" id="IL6" step="0.1" placeholder="< 7">
            <small>pg/mL | Cytokine storm marker</small>
        </div>
        <div class="form-group">
            <label>Interleukin-1Œ≤ (IL-1Œ≤)</label>
            <input type="number" id="IL1b" step="0.1" placeholder="< 5">
            <small>pg/mL | ƒ∞nflamasyon marker</small>
        </div>
    </div>
</div>

<!-- NEW: Hematology Extended -->
<h4 class="section-toggle" onclick="toggleSection('hematology-ext')">
    ü©∏ Hematoloji Geni≈ületilmi≈ü (Yeni) <span class="toggle-icon">‚ñº</span>
</h4>
<div id="hematology-ext" class="collapsible-section">
    <div class="form-row">
        <div class="form-group">
            <label>ESR (Sedimentasyon)</label>
            <input type="number" id="ESR" step="1" placeholder="< 20">
            <small>mm/hr | Sepsis: >30</small>
        </div>
        <div class="form-group">
            <label>MDW</label>
            <input type="number" id="MDW" step="0.1" placeholder="19-21">
            <small>Unit | Sepsis: >23</small>
        </div>
        <div class="form-group">
            <label>MPV</label>
            <input type="number" id="MPV" step="0.1" placeholder="7.5-11.5">
            <small>fL | Mean platelet volume</small>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group">
            <label>RDW</label>
            <input type="number" id="RDW" step="0.1" placeholder="11.5-14.5">
            <small>% | Red cell distribution</small>
        </div>
        <div class="form-group">
            <label>Neutrophils</label>
            <input type="number" id="Neutrophils" step="0.1" placeholder="2-7">
            <small>K/¬µL | For NLR calculation</small>
        </div>
        <div class="form-group">
            <label>Lymphocytes</label>
            <input type="number" id="Lymphocytes" step="0.1" placeholder="1-3">
            <small>K/¬µL | For NLR calculation</small>
        </div>
    </div>
    <p class="info-text"><strong>Auto-calculated:</strong> NLR = Neutrophils / Lymphocytes, PLR = Platelets /
        Lymphocytes</p>
</div>

<!-- NEW: Coagulation Panel Extended -->
<h4 class="section-toggle" onclick="toggleSection('coag-ext')">
    ü©π Pƒ±htƒ±la≈üma Paneli Geni≈ületilmi≈ü (Yeni) <span class="toggle-icon">‚ñº</span>
</h4>
<div id="coag-ext" class="collapsible-section">
    <div class="form-row">
        <div class="form-group">
            <label>D-Dimer</label>
            <input type="number" id="DDimer" step="0.1" placeholder="< 0.5">
            <small>Œºg/mL | D IC: >1.5</small>
        </div>
        <div class="form-group">
            <label>PT</label>
            <input type="number" id="PT" step="0.1" placeholder="11-13.5">
            <small>seconds | Prothrombin time</small>
        </div>
        <div class="form-group">
            <label>aPTT</label>
            <input type="number" id="aPTT" step="0.1" placeholder="25-35">
            <small>seconds | Activated PTT</small>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group">
            <label>INR</label>
            <input type="number" id="INR" step="0.01" placeholder="0.8-1.2">
            <small>ratio</small>
        </div>
    </div>
</div>

<!-- NEW: Chemistry Extended -->
<h4 class="section-toggle" onclick="toggleSection('chem-ext')">
    ‚öóÔ∏è Kimya Paneli Geni≈ületilmi≈ü (Yeni) <span class="toggle-icon">‚ñº</span>
</h4>
<div id="chem-ext" class="collapsible-section">
    <div class="form-row">
        <div class="form-group">
            <label>Ionized Calcium (Ca++)</label>
            <input type="number" id="IonizedCalcium" step="0.01" placeholder="1.16-1.32">
            <small>mmol/L | Sepsis: low</small>
        </div>
        <div class="form-group">
            <label>Phosphorus</label>
            <input type="number" id="Phosphorus" step="0.1" placeholder="2.5-4.5">
            <small>mg/dL</small>
        </div>
        <div class="form-group">
            <label>Albumin</label>
            <input type="number" id="Albumin" step="0.1" placeholder="3.5-5.5">
            <small>g/dL | Sepsis: low</small>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group">
            <label>Sodium (Na)</label>
            <input type="number" id="Sodium" step="0.1" placeholder="135-145">
            <small>mmol/L | For Anion Gap</small>
        </div>
    </div>
    <p class="info-text"><strong>Auto-calculated:</strong> Anion Gap = Na - (Cl + HCO3), Shock Index = HR / SBP</p>
</div>

                    <button type="submit" class="btn btn-primary btn-large">
                        üîÆ Veri Kaydet ve Tahmin Yap
                    </button>
                </form>
            </div>

            <!-- Saatlik Veri Ge√ßmi≈üi -->
            <div class="card">
                <h3>üìù Saatlik Veri Ge√ßmi≈üi</h3>
                <div id="hourly-history" class="hourly-history">
                    <!-- Saatlik veriler buraya y√ºklenecek -->
                    <p class="text-muted">Hen√ºz saatlik veri yok</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Hasta Ekleme Modal -->
    <div id="add-patient-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ûï Yeni Hasta Ekle</h3>
                <button class="close-btn" onclick="closeAddPatientModal()">&times;</button>
            </div>
            <form id="add-patient-form" onsubmit="addPatient(event)">
                <div class="form-group">
                    <label>Hasta ID *</label>
                    <input type="text" id="new-patient-id" required placeholder="P001, P002, vb.">
                </div>
                <div class="form-group">
                    <label>Hasta Adƒ± *</label>
                    <input type="text" id="new-patient-name" required placeholder="Ahmet Y.">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Ya≈ü</label>
                        <input type="number" id="new-patient-age" min="0" max="120" placeholder="45">
                    </div>
                    <div class="form-group">
                        <label>Cinsiyet</label>
                        <select id="new-patient-gender">
                            <option value="">Se√ßiniz</option>
                            <option value="Male">Erkek</option>
                            <option value="Female">Kadƒ±n</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAddPatientModal()">ƒ∞ptal</button>
                    <button type="submit" class="btn btn-primary">Hasta Ekle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Bildirimi -->
    <div id="toast" class="toast"></div>

    <script src="script.js"></script>
</body>

</html>